<!DOCTYPE html>
<html>
  <head>
    <title>threejs-hologram</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <link rel="stylesheet" href="css/main.css"/>
  </head>
  <body  ontouchmove="event.preventDefault();">
    <div class="container">
      <div class="top"></div>
      <div class="left"></div>
      <div class="right"></div>
      <div class="bottom"></div>
    </div>
    <script src="js/three.min.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script src="js/framerate.js"></script>
    <script>
      //获取定影样式类名的元素的宽度
      var getWidth = function(className){
        var element = document.getElementsByClassName(className);
        if(!element||element.length<=0)
          return 0;
        else
          return parseFloat(element[0].offsetWidth);
      };
      //获取定影样式类名的元素的高度
      var getHeight = function(className){
        var element = document.getElementsByClassName(className);
        if(!element||element.length<=0)
          return 0;
        else
          return parseFloat(element[0].offsetHeight);
      };

      //设置top/left/right/bottom的高度与绝对位置。
      var heightValue = getWidth("top")+"px";
      document.getElementsByClassName("top")[0].style.height=heightValue;
      document.getElementsByClassName("left")[0].style.height=heightValue;
      document.getElementsByClassName("right")[0].style.height=heightValue;
      document.getElementsByClassName("bottom")[0].style.height=heightValue;
      document.getElementsByClassName("right")[0].style.top=heightValue;
      document.getElementsByClassName("left")[0].style.top=heightValue;
      document.getElementsByClassName("bottom")[0].style.top=parseFloat(heightValue) * 2 + 'px';
    </script>
    <script>
      //初始化四个场景
      var scene = new THREE.Scene();
      //初始化一台摄像机
      var camera1 = new THREE.PerspectiveCamera(45,getWidth('bottom')/getHeight('bottom'),0.1,1000);         //前方
      var camera2 = new THREE.PerspectiveCamera(45,getWidth('right')/getHeight('right'),0.1,1000);           //右方
      var camera3 = new THREE.PerspectiveCamera(45,getWidth('top')/getHeight('top'),0.1,1000);               //后方
      var camera4 = new THREE.PerspectiveCamera(45,getWidth('left')/getHeight('left'),0.1,1000);             //左方
      //初始化四个渲染器
      var renderer1 = new THREE.WebGLRenderer();     //前方
      var renderer2 = new THREE.WebGLRenderer();     //左方
      var renderer3 = new THREE.WebGLRenderer();     //后方
      var renderer4 = new THREE.WebGLRenderer();     //右方
      //渲染器设置宽高
      renderer1.setSize(window.getWidth('bottom'),window.getHeight('bottom'));
      renderer2.setSize(window.getWidth('left'),window.getHeight('left'));
      renderer3.setSize(window.getWidth('top'),window.getHeight('top'));
      renderer4.setSize(window.getWidth('right'),window.getHeight('right'));
      //将渲染目标与相应div绑定
      document.getElementsByClassName("bottom")[0].appendChild(renderer1.domElement);
      document.getElementsByClassName("left")[0].appendChild(renderer2.domElement);
      document.getElementsByClassName("top")[0].appendChild(renderer3.domElement);
      document.getElementsByClassName("right")[0].appendChild(renderer4.domElement);
      //定义摄像机轨迹控制
      //var control1 = new THREE.OrbitControls(camera1,renderer1.domElement);
      //control1.autoRotate = true;
      //control1.enableZoom = false;
      //control1.enablePan = false;
      //control
      //设置摄像机位置
      camera1.position.set(0,0,5);
      camera2.position.set(5,0,0);
      camera3.position.set(0,0,-5);
      camera4.position.set(-5,0,0);
      //设置摄像机镜头目标坐标
      camera1.lookAt(0,0,0);
      camera2.lookAt(0,0,0);
      camera3.lookAt(0,0,0);
      camera4.lookAt(0,0,0);
      //设置摄像机头部朝向
      camera1.rotateZ(Math.PI);
      camera2.rotateZ(3*Math.PI/2);
      camera4.rotateZ(Math.PI/2);

      //定义光照
      var ambientLight = new THREE.AmbientLight(0xffffff,1.0);
      scene.add(ambientLight);

      //定义方块几何结构
      var cubeGeometry = new THREE.BoxGeometry(2.5,2.5,2.5);
      //定义方块材质
      var materials = [
        new THREE.MeshLambertMaterial({color:0xff0000,side:THREE.DoubleSide}),
        new THREE.MeshLambertMaterial({color:0x00ff00,side:THREE.DoubleSide}),
        new THREE.MeshLambertMaterial({color:0x0000ff,side:THREE.DoubleSide}),
        new THREE.MeshLambertMaterial({color:0xff00ff,side:THREE.DoubleSide}),
        new THREE.MeshLambertMaterial({color:0xffff00,side:THREE.DoubleSide}),
        new THREE.MeshLambertMaterial({color:0x00ffff,side:THREE.DoubleSide}),
      ];
      var cubeMaterials = new THREE.MeshFaceMaterial(materials);
      //定义方块物体
      var cube = new THREE.Mesh(cubeGeometry,cubeMaterials);

      //cube.rotateZ(Math.PI/4);
      //cube.rotateX(Math.PI/4);

      //将物体放入场景中。
      scene.add(cube);

      //定义修改函数，用于修改场景参数
      var lastAzimuthalAngle;
      var rotateSpeed = 0.01;
      var update = function(){
        cube.rotation.y+=rotateSpeed;
        //control1.update();
        //var azimuthalAngle = control1.getAzimuthalAngle();
        //if(lastAzimuthalAngle === azimuthalAngle)
        //  return;
        //lastAzimuthalAngle = azimuthalAngle;
        //console.log(azimuthalAngle);
        //camera2.rotation = new THREE.Euler(azimuthalAngle,0,0);
        //camera2.updateMatrix();
        //if(control1.getAzimuthalAngle()!==0)
          //console.log(control1.getAzimuthalAngle());

      };

      //定义渲染函数，
      var render = function(){
        renderer1.render(scene,camera1);
        renderer2.render(scene,camera2);
        renderer3.render(scene,camera3);
        renderer4.render(scene,camera4);
      };
      //定义循环执行函数
      var GameLoop = function(){
        requestAnimationFrame(GameLoop);
        update();
        render();
      };

      GameLoop();
    </script>
    <script>

    </script>
  </body>
</html>
